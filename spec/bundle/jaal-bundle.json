{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/jaal.json","title":"JAAL 1.1","description":"JSON-based algorithm animation language","type":"object","properties":{"metadata":{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/metadata.json","title":"JAAL 1.1 metadata","description":"Metadata about a JAAL recording","type":"object","properties":{"jaalVersion":{"description":"Text 'JAAL' with a language version number","type":"string"},"jaalGenerator":{"description":"JAAL data generator software name and version","type":"string"},"browser":{"description":"Name and version of the web browser which is running JAAL data generator software","type":"string"},"exercise":{"description":"Information about the VAS exercise","type":"object","properties":{"name":{"description":"Name of the exercise","type":"string"},"collection":{"description":"Name of the exercise collection (e.g. the name of an electronic textbook)","type":"string"},"runningLocation":{"description":"URL of the configured and running exercise","type":"string"}},"required":["name","collection"]},"simulationStart":{"description":"A timestamp: when the exercise is loaded and the JAAL recorder begins recording. A time stamp in ISO 8601 format: YYYY-MM-DDTHH:mm:ss.sssZ","type":"string","pattern":"^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}Z"}},"required":["jaalVersion","jaalGenerator","exercise"]},"definitions":{"description":"Definitions: style and model answer","$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/definitions.json","title":"JAAL 1.1 definitions","type":"object","properties":{"styles":{"description":"Array of style definitions.","type":"array","items":{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/style.json","title":"JAAL 1.1 node","description":"A style definition in a JAAL recording.","type":"object","properties":{"name":{"description":"A unique identifier for the style among all styles.","type":"string","minLength":3},"text-color":{"description":"Color for the text inside the element.","$ref":"#/properties/definitions/properties/styles/items/definitions/hexcolor"},"fill-color":{"description":"Fill color for the inside area of the element.","$ref":"#/properties/definitions/properties/styles/items/definitions/hexcolor"},"border-color":{"description":"Border color for the outline of the element.","$ref":"#/properties/definitions/properties/styles/items/definitions/hexcolor"}},"definitions":{"hexcolor":{"description":"RGB color triplet:  #rrggbb, where each rr, gg, and bb are red-green-blue values in the range 0..255 in hexadecimal.","type":"string","pattern":"^#([0-9]|[a-f]){6}$"}}}},"score":{"description":"Grading data of the exercise.","type":"object","properties":{"modelSteps":{"description":"Number of steps in the model answer.","type":"integer","minimum":0},"studentSteps":{"description":"The total number of steps the student has performed.","type":"integer","minimum":0},"correctSteps":{"description":"Number of student's consecutive correct steps from the beginning, counted by automatic grader of the exercise.","type":"integer","minimum":0},"undoSteps":{"description":"Number of Undo actions","type":"integer","minimum":0}},"required":["modelSteps","studentSteps","correctSteps","undoSteps"]},"modelAnswer":{"description":"Steps of the model answer.","type":"array","items":{"$ref":"#/properties/animation/items"}}},"required":["styles","score","modelAnswer"]},"initialState":{"description":"Initial state of data structures","$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/initialState.json","title":"JAAL 1.1 definitions","type":"object","properties":{"dataStructures":{"description":"Initial data structures for the exercise.","type":"array","items":{"anyOf":[{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/graph.json","title":"JAAL 1.1 graph","description":"A graph data structure for representing lists, trees, and graphs.","type":"object","properties":{"id":{"description":"A unique identifier for the graph among all data structures.","type":"string","pattern":"^graph"},"node":{"description":"List of nodes in the graph.","type":"array","items":{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/2"}},"edge":{"description":"List of edges in the graph.","type":"array","items":{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/edge.json","title":"JAAL 1.1 edge","description":"A graph edge in a JAAL recording.","type":"object","properties":{"id":{"description":"A unique identifier for the node among all data structures.","type":"string","pattern":"^edge"},"node":{"description":"A graph edge is defined by two nodes. If the graph is directed, the first node is the source and the second node is the target.","type":"array","minItems":2,"maxItems":2,"items":{"type":"string","pattern":"^node"}},"style":{"description":"Graphical style of the node: a name of a style definition.","type":"string"},"tag":{"description":"Text displayed in the middle of the edge. E.g. name or weight of the edge.","type":"string"},"tailElem":{"description":"Data element at the tail (start) node of the edge.","type":"string"},"headElem":{"description":"Data element at the head (end) node of the edge.","type":"string"}},"required":["id","node"]}},"directed":{"description":"Directedness of the graph.","type":"boolean"},"root":{"description":"Indicates the root node, if the graph is a rooted tree.","type":"string","pattern":"^node"},"dsClass":{"description":"A keyword describing the main interpretation of the graph","type":"string","enum":["list","tree","graph"]},"dsSubClass":{"description":"A free keyword descriping the detailed interpretation of the graph.","type":"string"},"legend":{"description":"A text to be displayed on the top of the graph.","type":"string"},"style":{"description":"Graphical style of the node: a name of a style definition.","type":"string"}},"required":["id","node","edge","directed","dsClass"]},{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/matrix.json","title":"JAAL 1.1 matrix","description":"A one- or two-dimensional array with fixed number of rows and columns.","type":"object","properties":{"id":{"description":"A unique identifier for the matrix among all data structures.","type":"string","pattern":"^matrix"},"rows":{"description":"Number of rows in the matrix.","type":"integer","minimum":1},"columns":{"description":"Number of columns in the matrix.","type":"integer","minimum":1},"key":{"description":"List of rows in the array.","type":"array","items":{"description":"List of cells on a row.","type":"array","items":{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/2"}}},"rowLabels":{"description":"Label for each row to be displayed on the bottom of the matrix.","type":"array","items":{"type":"string"}},"columnLabels":{"description":"Label for each column to be displayed on the bottom of the matrix.","type":"array","items":{"type":"string"}},"legend":{"description":"A text to be displayed on the top of the matrix.","type":"string"},"style":{"description":"Graphical style of the node: a name of a style definition.","type":"string"}},"required":["id","rows","columns","key"]},{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/node.json","title":"JAAL 1.1 node","description":"Generic data structure for an array cell, a list node, a tree node, and a graph node.","type":"object","properties":{"id":{"description":"A unique identifier for the node among all data structures.","type":"string","pattern":"^node"},"key":{"description":"Primary data inside the node. If the type is string, it may also be an identifier of a graph, matrix, or node defined elsewhere.","oneOf":[{"type":"string"},{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/keyvalue.json","title":"JAAL 1.1 key-value pair","description":"A key which points to a value.","type":"object","properties":{"id":{"description":"A unique identifier for the node among all data structures.","type":"string","pattern":"^keyvalue"},"key":{"description":"Key part of the key-value pair. If the type is string, it may also be an identifier of a graph, matrix, or node defined elsewhere.","oneOf":[{"type":"string"},{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/0"},{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/1"},{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/2"}]},"value":{"description":"Value part of the key-value pair. If the type is string, it may also be an identifier of a graph, matrix, or node defined elsewhere.","oneOf":[{"type":"string"},{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/0"},{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/1"},{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/2"}]}},"required":["id","key","value"]},{"type":"array","items":{"$ref":"#/properties/initialState/properties/dataStructures/items/anyOf/2/properties/key/oneOf/1"}}]},"legend":{"description":"A text to be displayed aside the node.","type":"string"},"style":{"description":"Graphical style of the node: a name of a style definition.","type":"string"}},"required":["id","key"]}]}}},"required":["dataStructures"]},"animation":{"description":"Student's trace as algorithm animation","type":"array","items":{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://jaal.fi/schemas/event.json","title":"JAAL 1.1 event","description":"An event in JAAL 1.1 recording. An event is a time-dependent user action.","type":"object","properties":{"type":{"description":"The type of the event","type":"string","pattern":"^click|grade|undo|operation|narration$"},"time":{"description":"A time in milliseconds from the start of the simulation.","type":"integer","minimum":0},"object":{"description":"Reference to a JAAL data structure or the Undo button.","type":"string","pattern":"^edge|graph|keyvalue|matrix|node"}},"if":{"properties":{"type":{"const":"click"}}},"then":{"required":["object","time","type"]},"else":{"required":["time","type"]}}}},"required":["metadata","definitions","initialState","animation"]}
